[TOC]

VLAN
---
VLAN - 虚拟局域网（Virtual Local Area Network）。
在IEEE 802.1Q中，给定以太网上的最大VLAN数为4094。（12位VID。减去头尾的0和4095）

# 作用
* VLAN可以为网络提供以下作用：
    * 广播控制
    * 带宽利用
    * 降低延迟
    * 安全性（非设计作用，本身功能所附加出的）
* 采用虚拟局域网技术实现交换机以太网的广播隔离。
* 一个VLAN相当于OSI模型第2层的广播域，它能将广播控制在一个VLAN内部。
* 不同VLAN之间或VLAN与LAN/WAN的数据通信必须通过第3层（网络层）完成。

# 原理（划分方式）
## 物理层(physical layer)
* 以`交换机端口`作为划分VLAN的基础。
* 适合规模不大的组织。

## 数据链路层(data link layer)
* 以每台主机的`MAC地址`作为划分VLAN的基础。
* 实现方法：
    * 创建一个MAC与VLAN映射的数据库。
    * 当网络设备连接到端口后，`交换机`向`VMPS(VLAN管理策略服务器)`请求这个数据库。
    * 找到相应的映射，完成VLAN的分配。
* 优点：
    * 计算机物理位置的不同，也不影响VLAN的运作。
* 缺点：
    * 人为建立MAC与VLAN的映射关系；因此导致管理复杂度增加。

## 网络层
* 以`IP地址`作为划分VLAN的基础；以子网视为VLAN设置的依据。【？？？】
* 优点：
    * 网管人员已经将内部网段做好规划与分配后，将可大辐降低规划并设置VLANs架构的复杂度。
* 缺点：
    * 交换机需要对帧进行处理（原本不需要），降低交换机接收和分派分组的效率。
