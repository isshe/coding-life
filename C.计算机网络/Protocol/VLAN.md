VLAN
---
VLAN - 虚拟局域网（Virtual Local Area Network）。
在 IEEE 802.1Q 中，给定以太网上的最大 VLAN 数为 4094。（12 位 VID。减去头尾的 0 和 4095）

# 作用
* VLAN 可以为网络提供以下作用：
    * 广播控制
    * 带宽利用
    * 降低延迟
    * 安全性（非设计作用，本身功能所附加出的）
* 采用虚拟局域网技术实现交换机以太网的广播隔离。
* 一个 VLAN 相当于 OSI 模型第 2 层的广播域，它能将广播控制在一个 VLAN 内部。
* 不同 VLAN 之间或 VLAN 与 LAN/WAN 的数据通信必须通过第 3 层（网络层）完成。

# 原理（划分方式）
## 物理层 (physical layer)
* 以`交换机端口`作为划分 VLAN 的基础。
* 适合规模不大的组织。

## 数据链路层 (data link layer)
* 以每台主机的`MAC地址`作为划分 VLAN 的基础。
* 实现方法：
    * 创建一个 MAC 与 VLAN 映射的数据库。
    * 当网络设备连接到端口后，`交换机`向`VMPS(VLAN管理策略服务器)`请求这个数据库。
    * 找到相应的映射，完成 VLAN 的分配。
* 优点：
    * 计算机物理位置的不同，也不影响 VLAN 的运作。
* 缺点：
    * 人为建立 MAC 与 VLAN 的映射关系；因此导致管理复杂度增加。

## 网络层
* 以`IP地址`作为划分 VLAN 的基础；以子网视为 VLAN 设置的依据。【？？？】
* 优点：
    * 网管人员已经将内部网段做好规划与分配后，将可大辐降低规划并设置 VLANs 架构的复杂度。
* 缺点：
    * 交换机需要对帧进行处理（原本不需要），降低交换机接收和分派分组的效率。
