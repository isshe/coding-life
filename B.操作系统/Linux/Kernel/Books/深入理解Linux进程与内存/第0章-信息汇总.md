# 信息汇总

## 各类时间数量级

- 进程上下文切换：微秒（us）级别，例如 3 ~ 5 us。
- 系统调用：微秒到毫秒级别，不同系统调用需要进行的操作不同，时间消耗差异较大。例如个人测试机器上，read 27 微秒，clone 387 微秒，wait4 是 6490 微秒（wait4 是等待子进程执行完退出，不会占用 CPU）。
- 函数调用：纳秒（ns）级别。例如个人机器上，C 函数的简单函数调用是 0.11 ns，go 函数调用是 1.24 ns。（通过上面的测试程序可获取）
- RPC（远程过程调用）：毫秒甚至秒级别。
- CPU 调度延迟：通常 1ms 以内算正常，大于 1ms 可能 CPU 有瓶颈。

快速记忆口诀：

```
纳秒：缓存、函数调用
微秒：内存、上下文切换、系统调用
毫秒：磁盘 I/O、网络、数据库
秒级：跨网络 RPC、复杂计算
```

## 附录/参考（AI）

### 各类时间数量级（常见参考）

#### CPU 相关

- **CPU 时钟周期**：纳秒级（~0.3 ns @ 3GHz）
- **L1 缓存访问**：~1 ns
- **L2 缓存访问**：~3-10 ns
- **L3 缓存访问**：~10-40 ns
- **函数调用**：纳秒级（0.1-2 ns，C 更快，Go/Python 较慢）
- **原子操作/锁**：几十纳秒（~20-100 ns）

#### 内存相关

- **主内存访问**：~100 ns
- **内存分配（malloc）**：几百纳秒到微秒（~100 ns - 1 us）
- **内存页错误（page fault）**：微秒级（~1-10 us）
- **内存拷贝（1KB）**：~1 us

#### 进程/线程

- **线程上下文切换**：微秒级（~1-3 us）
- **进程上下文切换**：微秒级（~3-10 us，比线程慢）
- **进程创建（fork）**：几百微秒（~100-500 us）
- **线程创建**：几十微秒（~10-50 us）

#### 系统调用

- **简单系统调用**（getpid）：~100-300 ns
- **中等系统调用**（read/write）：微秒级（~1-50 us）
- **复杂系统调用**（clone/fork）：几百微秒（~100-500 us）
- **阻塞系统调用**（wait/sleep）：取决于等待时间，不占 CPU

#### 存储 I/O

- **SSD 随机读**：微秒级（~10-100 us）
- **SSD 顺序读**：微秒级（~20-50 us）
- **机械硬盘随机读**：毫秒级（~5-10 ms）
- **机械硬盘顺序读**：毫秒级（~1-5 ms）

#### 网络

- **本地回环（localhost）**：微秒级（~10-50 us）
- **同机房网络往返（RTT）**：亚毫秒级（~0.1-1 ms）
- **同城网络 RTT**：毫秒级（~1-5 ms）
- **跨省网络 RTT**：几十毫秒（~20-50 ms）
- **跨国网络 RTT**：几百毫秒（~100-300 ms）
- **RPC 调用**：毫秒到秒级（~1 ms - 几秒，取决于网络和处理）

#### 数据库

- **内存数据库查询**：微秒级（~10-100 us）
- **本地数据库查询**：亚毫秒到毫秒（~0.1-10 ms）
- **远程数据库查询**：毫秒到秒级（~1-100 ms）
