# 第 4 章 进程加载启动原理

## 问题

- segment 和 session 的概念？分别是什么？
- 加载可执行文件头时，是读取了 128 字节还是 256 字节？
- 为何可执行文件的加载器用 list 而不用 hash？每次加载二进制文件查找加载器时，都需遍历列表？


## 总结

### segment 和 session 的概念？分别是什么？

答：segment 由相同权限的一个或多个 session 组成，以便操作系统更快地加载。

### 为何可执行文件的加载器用 list 而不用 hash？每次加载二进制文件查找加载器时，都需遍历列表？

答：

1. ​加载器数量极少​​，遍历开销可忽略。
1. 需要维护匹配顺序​​（如脚本优先于 ELF）。
1. 动态注册/卸载的灵活性​​。
1. 代码简洁性​​，避免哈希表的复杂性。

这种设计在保持高效的同时，完美满足了内核的需求。
哈希表虽然理论复杂度更低，但在实际场景中并无优势。
