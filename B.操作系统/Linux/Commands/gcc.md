[TOC]

gcc
---

# 优化级别

- `-O0`：不进行优化（不指定 -O 也是同样效果），大多数优化被禁用，单独指定优化选项也不会生效。
- `-O/-O1`：减少代码大小和执行时间，而不执行任何需要大量编译时间的优化。去掉某些调试信息之类的。
- `-O2`：执行几乎所有的不包含时间和空间权衡的优化，不进行循环展开。
  - 时间和空间权衡？
- `-O3`：内联简单的函数到被调用函数之类的优化。
- `-Os`：优化大小，开启选项基本与 O2 相同，除了几个通常会增大大小的选项。
- `-Ofast`：包含所有 O3 的优化，并不遵守严格的标准，启用了并非对所有符合标准的程序都有效的优化。
- `-Og`：优化调试体验，与 -O0 一样完全禁用了许多优化选项，对于生成可调试代码来说，它是比 -O0 更好的选择，因为在 -O0 处禁用了一些收集调试信息的编译器选项。
- `-Oz`：优化大小而不是速度，与 Os 类似。
  - 优化大小，所以指令长度变短，因此可能导致需要执行更多指令。


此命令可以列出指定优化级别时的选项开关情况：

```bash
gcc -O --help=optimizers -O3
```

# 选项

`-fno-omit-frame-pointer`：也不保证所有函数都有帧指针，某些情况下会一直忽略。
`-fomit-frame-pointer`：忽略不需要帧指针的函数的帧指针。-O 即开启。


# 参考

- [Optimize-Options](https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#Optimize-Options)
