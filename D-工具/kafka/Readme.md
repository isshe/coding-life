[TOC]

kafka
---

# 什么是kafka？
* `kafka`是`Linkedin`公司开发的一款开源的`基于发布订阅模式的消息引擎系统`。
  * 分布式的、支持多分区、多副本；
  * 基于zookeeper的分布式消息流平台。

# kafka的基本术语
* `消息/记录`: Kafka中的数据单元，类似数据库表中的一行记录。
* `主题(Topic)`: 消息的种类。类似数据库的表。
* `分区(partition)`：主题可以被分为多个分区，不同分区可在不同机器上(`伸缩性`)。
* `偏移量(Consumer Offset)`：递增的整数值，记录消费者发生重平衡时的位置，以便用来恢复数据。
* `Broker`: 一个独立的Kafka服务器。
  * 接收生产者的消息，为消息设置偏移量，并提交保存消息到磁盘。
* `Broker集群控制器`: Brocker集群中的Leader Broker。
* `副本(Replica)`: 消息的备份。
  * `领导者副本（Leader Replica）`：对外提供服务的副本。
  * `追随者副本（Follower Replica）`：被动跟随。
* `重平衡(rebalance)`: 消费者实例挂掉后，其他消费者实例重新分配订阅主题分区的过程。（高可用）

![](./kafka.jpg)

# Kafka有哪些特性？
* 高吞吐：
* 低延迟：
* 高伸缩性：
* 持久性、可靠性：
* 容错性：
* 高并发：

# Kafka有哪些使用场景？
* 活动跟踪：跟踪用户行为。
* 传递消息：基本用途。
* 度量指标：记录运营监控数据。
* 日志记录：Kafka的基本概念来源于提交日志。
* 流式处理。
* 限流削峰：突发请求处理。


# kafka是如何保证可靠性的？


# kafka是如何选举的？


# kafka的发布订阅是如何实现的？


# kafka的消息保存策略是怎样的？
* 默认保存策略：要么保存一段时间（如7天）；要么保存到消息达到一定大小（如1G）。